services:
- docker
script:
- docker build --target test --tag todo-app:test .
- docker run --env-file .env.test todo-app:test tests
- docker run
  -e SECRET_KEY=$SECRET_KEY
  -e TRELLO_ACCOUNT_KEY=$TRELLO_ACCOUNT_KEY
  -e TRELLO_SECRET_KEY=$TRELLO_SECRET_KEY
  -e BOARD_ID=$BOARD_ID
  -e TODO_LIST_ID=$TODO_LIST_ID
  -e IN_PROGRESS_LIST_ID=$IN_PROGRESS_LIST_ID
  -e DONE_LIST_ID=$DONE_LIST_ID
  todo-app:test tests_e2e
env:
  global:
  - secure: cBZMzK6O6ZeXEuKqLckOb4RgUCUN8OrYKY34/5csjngwno5MXpR1VryEsispWRKa7VVRSmBNVcyTBdAYUk8356p84ziVBZjXrFI/8FTMeuwEbqnM/aMWRpz8Mwpw9Q1l71LU16fjZxu39xB1aR5VoEpZQpcrVFiZAa/eAb6fOKfEoD8V/L+lXafdrKAv8l9lN+NpRFen+XhBrnOreszuDVybEoGxaHJh1RdbMM4yfSQfRlp9ykxoOOcVarwzR92XlywkgdrFykn4oyPAQA8NSz97Sx9l2ka0iPs9IMSczwiqIOVD6S/9X3BYcQcDT0vO0R4CzhO/PgruWLEMd//Rq2CbbnBJzJOl/MNduU4da4d2yO+R8JjNMBdBl0R3NVqfFGpp8dxhYhlwhoJ/F8OsudS2z7C7IaHd1no8yvg+FyfPuKD4GPUAJukcfGG6hzA93HZcM2a1gkwZNWoSr0oWDzWX0ExeJnMCIQGCBU6FuSb6JmP/RGrW4xD+WKLqZ9wognM4COI3QFhJ8nRPLcpMA54A7+h8NPo0EDa2qBXmyJm3fk5gaP1y1OenL9c9xNsvCIY4NsVC1T6iO1S+TRgSQhzDDtfnqWleUhfjD7w8TThiTgv2+LDHwRdA4VOQFE8NyNhv+vH+aaro1h9BmFVsdhiZ68pFmQbIjkBxEf2P1qE=
  - secure: WiCjlyMUfw+ZfgX3ErVyOt2cGMpdbSbslSs4wl07UOeZYC1STj5Xd7lSeTM6VDgP6ijJJtF2cYF8Bl4BA7PIoJ1pm5KeIJU8ZmWYQrbqqNA7IRjt5B0kUx73CODo2h1BRBwrAg7I1FsHiRLZhFVswsPeXAmH/lI3aOMRbNl/dZZ8YKvo+XRlOmwezzUEvOWOb3Gm2U0vJlC/3AmeNL1D0vRnc+b4KCxe0snmY3FMzu8sxuQRC5ffqCNKtA4HilkrRv0xqbbpWSL1PVo9enMnSxRtmsIwnetqhXvNPq+LnxkQ1XyDKIWkTWJFkBjDO1BreuPA/YuKq0gVdMTYzKk4O2bKm6/yQvsZZzWzQnIRo+YQ9sqaWZBrrIE621yl/fGVXDTw7xElAoeRGJfDq1W1T09Zz5P357dC0k2v5wuOkcqrCqgYDGBBQIf9Z+OFfhMG3pA9Q0HDiw2iMZRik2w8p+xsoWSkCEFWG3aZb1/X68MYqXgH+xcFfF0amwFolMeCHw0eFhPBtlgAdkiHqL7oNAtXTMHvSNBiibXc/80Q9R/M6z18H7IkFbk/ikfi5yE1a0bT6/wMLWSZ0mMa6tXD65p1sgSqD3djIY4CBHtV2HT5SUl9QaXjDUH6UmsOoX2+rZQlR4azZPG3GOMKw5CkqX7pDtNCp3mC+sBEBuo++Xc=
  - secure: Ie08hOtNNGoat0AH6zA1UPIdP69/gMgh2gMsydSrrU8vhuzXsG8yGdZzk0E6StvTY67jDnU6s9tOK25nfTTIkAONgENduweiBrmGn7YolaY5ZDuoP69jGIhUwMGco+M+Beek7dvCf9D+qn3fH36QQ3akg80pmf6uk03up4qYNV+sei8Hxz3gSzqYJG6c2ytrE65b2K2qN0g0P3dfIMS55zNZQ2mHTFXm2yWlbj6vYHbqRUcQ9SG+9xQg51a3P/h7bzFtqmGFIlYMOOaYFB4Xat0RkKMbkQqldEdCnw6f6Cpg+647bqihjGv+bAm3D5pnQDQHwSZD5SZw63SY4ldHvoqj++u6aqvwJYuZsQnbODGMUNwHOgn43h6D4+DxNi9aTtZicnVijeAr4fT3ukBoHscOMiiNUtQcOeG1OTZJoQPQBxOV9tEN3zmbkvztqKg94Lh6/YIp6uYCMRj/TFYVjgJ4t681eYjihB64V8383AaJVbAGAPTljPhrOH3pcFlM42IJ0qxSrV2Gx9pyXHprnFJmndrvykq1mdijFJlr/rKePLZ1dyjAG8CnaRVRVVmMdkfz/RdYZ56Z7MBfc5hvyRfKT8xmPB28K90h+7aMPKteI99+PhkoR1WmswFHOfz8V7Q4KWksOhRQNPhOg1dNYl15t4IoEgJso33W+PNiKqI=
  - secure: R5TByNACyOBtSm9GMs3ZSrqksPqZBft1YqHXyHBPQ9d/U+qV1iyyyRUFlEwTwdAVGtDAaFftjba5iTSgzGsRQZSRW4xKE5KLDjZAAAqf9lwvO5YcQBqVDTxWHILwzGVk+W1FLqWN8RDl8jOg3sLHpPICWywZocOvNY0ZxYmhrl41yP5K3sPYZzU8/FmYoJ5v5RJiiQFaVstH+9PxeCQxZgfy5DZJZ+v+pYHrtwOox64Fo6p3kYEQXbyusG1xNOC0hr2kan7jS4sS4ZJ+OEERbGLEPj5cBdSGMSDaJiC9cYFleMOSZT10Qj6wBsMjq1TnXYHG4sRqs/Hx3J8jemgqeke7L5AKcBiQtlq+JKodNbAbdolcEqwW5VXKruvHKUkW+2tgOQbk9zvs/vQCy0YoomMD1kz2JTCcYvAW8l+BUZ/ALMFD06UK5hI5z5Hiebf+xP3kWGbQhMWbtSCO2U+QJwXaxg/BBjBzNBr9DFoEw6l7BUgKKs/r+FKyDS6rH1MaEAjpZlyvdHCE2+oELu52WwsWmiqbdwmlubY5P/wAy3N29pk3e6k+BY8i4YPZlYC/z0wZ+J/8aIzR69Un/e1UnNgSJDHThWCjl31eMQcl70D/DhQyUag73DiaK657dFNOZlYMm+6Yugpz5dF7G+KUxA94OBHS/YgZuK48a7BN000=
  - secure: HBQhux2acYXH4YaGXHzQ6o1ycWQXXA9iNtVAnXTjLIhWfrrRYTTvLzsDgJvH3Sk75pkd+kxVD9u+kTKx2JDaDlz3pp/zp2xPCCH+iOi950L9/WGZ6ORHeeyjitl9YCQiJElZRT1V763dVv/J8zH/IrKGxRaRurcOGkij8Fis5kHbUg55q4I46pVmkCPNRIA9wyJXgsEJZK90uFmZqU0wPpa307rHARLfA2hTUs6hrURvKGXpj2Rh0f+Poa6A3V9GaXxz3HjCicLZKp+gwUSlxpCF2l5DhZ9aGIJXv7bTmLRPx54VQL3RV7iireaqz4dlWzQELk1ggQImM2suP9sNkUyQqIx1JIjrExqOtVBVxdN6Ht4tbITDuKfdP1xgsb0CXXUImRLuQBigA93nJZre7wfILvGHEsSjA/54ukQXSUtSkxlSF0+/beCiqZK9rJFhOcmrIyy+iSWQMTZyiNSFu2XDAARkGGLjAmqmz7q7QueawKybivm4yuycMvCyZ6pWM9Lia+MDCr185uZSuSo76D/H9XXCOkuUI+wtWSUXMe6AfIEfR/KeIhKTnTFC49yAeTe/xrLmj53W5qVi8oREUm8sl7aWcWVon3R+ZT0ZUkkcbkil4l85f1dMmyw3U/iquZJpywqdygf0yoIN6CAXN0osF4CmgqQEe+CbkMKdhMQ=
  - secure: T2MRpLJYQHsCV3JePEpJepjaG9PabeNLtUf0n9j9PovdgepMzbZOdj8nZxRHlCXvoW57whzsrLpTjolI77BcjSDHB3gYcQogDvsh09/0yAO5L4t5tdJ3rj5lECx/2omjGwsOPQ3FD1aokoVUHRvztT52bwXq8ebDtCke0ugp/YGrPtGAA0aPGv7HHp2TNOSOCv4Afvgd4rwXGJdo+ORQcwv/agIe+RRrBJxhzuV6vYG93WaDc69y3JzO1N+Ni8Ef3bgSugZD2kanfPff8qzlnnj3R9mgmxYtTh7STtsqkz1nTAzqDExTdpMZawQD/3vfVY7csFBj9d7HVIrCqGR1SAt/00GwDnhITnqC05oBziYko293zuxH2/GcycKPkVDKEUHNmZwpt409zcKL9hmV7xkqyvkCXGtgDAgARUrEsM0XyWdeRCV0QqvDNYjvK4Z0TFQ4l23w3xTxxQoVWzhKOUJwUk+DzkvjSGmpgimYhvDVcoKLFOUdkTSWKTeQEUk4yCUSF47lo8VcTlE7awAXLLazJg5QMwYEpUa6azJW2T6sylEDOmR3wBwfYy3UbofQPYc/rHA4BeE1+A256Tk/i61Oa4aAA/+MYaIcE2zaDxNLjy7H7kj+JZO4nN/vOCL2NfhzW8pPbm9hw7iJrap6UbVfjrJGHlCbyiuXS5bqLtI=
  - secure: XRSpbN1EnP1TJYUJjqWHqEFBUsJQFblAyunlwt+lYJUUfOMynk8y//0B7sytBQWpujL7ngU83EV6c2DVvHcyNgo30wXBi3FihJM69GWyxcr1BvWJsv/SwaDLah4wWgs4wWz469rZgMHMcW5KNlGWjPR+HBxzo6At5KkjPXjeNFzVa9wENHdQjLL60bLyY4M0FcHb1fS3+J9VVGc9r06f1d6Y1axWnaENTimUPBp5jw8X/82xOfY9H70QFJ7vkMJPldk7JN5mclGthnMAlnzdqL6NP5yRGijtc72j5Vh4dVuDX5QW3W1/hFyO67xxMfEjdSNKO4bRPTn8NVN/IxmjlVQueayfNHH1uQexYrGq+wKr0o+cq6m2LFOQC3gX+urRNpg3pP4AWUollyPO5491Ur8tr4SMI5I8f/zIjmMbuaMEQq9xbA/9go8vcqAuWp/q1QQdEruPjl4iA8cwDo9HdkC+O91GYQa4EazKkz0RgdUP7LHhUH2GaUt4ADO2UDUfwwxtFYk8aDHcwuK0pmcrcDTKy6zf8Rvq8I4Maxv1xuiVoL99T44YHkIwwirxbjT5QakYmsZuiCXUx0kxFF8x6moR3PZ8g3hzOC8rDCzlRhaYiNLQp3QmDJRQK44MsMi6PbX5cl28GY5GqxLiyHGroZOYMUDxq/dKXeSRT9qqnwM=
notifications:
  slack:
    secure: C9rqypo4WhQpHUxaIImNh59n2HPJS5/XJSLgMb8EBP3S+pdB7WAWczO1n2RpJrvpUTpXnyapGkxWZifsXBi8/XEbNLO1SfG1VYu2vJtoMrg77Q9FLYSMBdS1c1n1GiMU14jdiSE/9NLWg8vGOFQUiXHYZ2zDz1uuVed40p3MAdmWlMmNRT4SG1hGqljxM4q0eyyowX1dBbXPaSNLsKxgXsALIz1PeKucXLUr7lzbMD/PcS8BszXFclP5sq1hhL6Tuj4UcFD6YTiK0mUecQnvGlPGHX7yItS3HF/wgF5IFcFN9WZuTFxnN2ajjYfbIUioKsXmpLC2pghBM0SNf6rS3bYFD4sYbwPc5REzK3ez9Q0rRJ2nnaqWUSF1ha5JTXMuvYbWJNvG4tkVXmw7/3YB8RgtDoRUZPDHW+mZsc7lRFxNQ2AnQn98IMmQS6kfTLWX8nTzdqxIRILeWLujINup0oQlGADZmTaFNP4OdFerXVOYErrvpoQCDaph4PYblRpIm17QzduAqtoFDcJEh2mzlp8ewuSro/PRNdb2C+XSTXI5F+puvobhU8ZgIJoKi2HTzBMQLaUG9yC2lOklFMEGhD4Ueztipbv7LdrPg3JRrKdtpxiZBJbOC6QFekZXG+VnJ/4Z4hmoWX7T7XqZxswCv/a0ayU+L4LmsF3bad3JNg0=
  email:
    recipients:
      - richardgbaker@yahoo.co.uk
    on_success: never
    on_failure: always